{% extends "main/base.html" %}

{% block add %}
<li class="nav-item"><a class="nav-link" href="{% url 'create' %}">Qo'shish</a></li>
{% endblock add %}
{% load static %}

{% block content %}


<section class="container my-5">
  <h2 class="mb-4 fw-bold">Maqolalar bo'limi</h2>

  <!-- Filter -->
  <div class="filter-bar">
    <a href="{% url 'articles' %}" class="filter-btn active">Barchasi</a>
    <a href="?category=Texnologiya" class="filter-btn">Texnologiya</a>
    <a href="?category=Web" class="filter-btn">Web</a>
    <a href="?category=Design" class="filter-btn">Design</a>
    <a href="?category=Biznes" class="filter-btn">Biznes</a>
    <a href="?category=Fan" class="filter-btn">Fan</a>
  </div>

  <!-- Articles -->
  <div class="row g-4">
    {% for article in articles %}
    <!-- Article cards (6 example cards) -->
    <div class="col-md-4 d-flex">
      <div class="card article-card w-100">
        <img src="{{ article.image.url }}" alt="AI">
        <div class="card-body">
          <div>
            <span class="badge-category mb-2">{{ article.category.name }}</span>
            <h4>{{ article.title }}</h4>
            <p>{{ article.description |slice:":100"}}</p>
          </div>
          <a href="detail.html" class="text-primary fw-bold mt-3">Batafsil →</a>
        </div>
      </div>
    </div>
    {% endfor %}
    <!-- Shu tarzda boshqa 5 ta maqola kartalari ham bir xil o'lchamda qo‘shilishi mumkin -->
  </div>

  <!-- Pagination -->
  <nav aria-label="Page navigation">
    {% if articles.has_other_pages %}
    <ul class="pagination">
      {% if articles.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ articles.previous_page_number }}">«</a></li>
      {% endif %}
      {% for page in articles.paginator.page_range %}
      {% if articles.number == page %}
      <li class="page-item active"><a class="page-link" href="?page={{page}}">{{page}}</a></li>
      {% else %}
      <li class="page-item"><a class="page-link" href="?page={{page}}">{{page}}</a></li>
      {% endif %}

      
      {% endfor %}
      {% if articles.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ articles.next_page_number }}">»</a></li>
      {% endif %}
    </ul>
    {% endif %}
  </nav>
</section>

{% endblock %}